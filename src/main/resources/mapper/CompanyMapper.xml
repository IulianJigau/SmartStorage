<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.java.test.smartstorage.mapper.CompanyMapper">

    <delete id="dropIndex">
        DROP INDEX IF EXISTS company_index;
    </delete>

    <insert id="createIndex">
        CREATE INDEX company_index ON company (corporate_number, process_id);
    </insert>

    <select id="getPage" resultMap="companyResultMap">
        SELECT *
        FROM company
        ORDER BY process_id DESC
        LIMIT #{size}
        OFFSET #{size} * (#{page} - 1)
    </select>

    <select id="getTotalEntries">
        SELECT COUNT(*)
        FROM company
    </select>

    <delete id="deleteAll">
        DELETE FROM company;
    </delete>

    <resultMap id="companyResultMap" type="Company">
        <id property="processId" column="process_id" />
        <id property="corporateNumber" column="corporate_number" />
        <result property="representativePosition" column="representative_position" />
        <result property="representativeName" column="representative_name" />
        <result property="postalCode" column="postal_code" />
        <result property="location" column="location" />
        <result property="name" column="name" />
        <result property="kana" column="kana" />
        <result property="status" column="status" />
        <result property="qualificationGrade" column="qualification_grade" />
        <result property="updateDate" column="update_date" />
        <result property="dateOfEstablishment" column="date_of_establishment" />
    </resultMap>
</mapper>